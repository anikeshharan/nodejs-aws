var Busboy = require('busboy');var fs = require('fs');var AWS = require('aws-sdk');AWS.config.region = 'us-east-1';var credentials = new AWS.SharedIniFileCredentials({profile: 'default'});AWS.config.credentials = credentials;function doUpload(req, res) {  if (req.method === 'POST') {      var busboy = new Busboy({ headers: req.headers });    console.time("upload");    busboy.on('file', function(fieldname, file, filename, encoding, mimetype) {		var s3obj = new AWS.S3({params: {Bucket: 'impetusbucket', Key: filename}});	s3obj.createBucket(function(){		s3obj.upload({Body: file}).on('httpUploadProgress', function(evt) { console.log(evt); }).send(function(err, data) { console.log(err, data) });		});      	      console.log('File [' + fieldname + ']: filename: ' + filename + ', encoding: ' + encoding + ', mimetype: ' + mimetype);            /*file.on('data', function(data) {        console.log('File [' + fieldname + '] got ' + data.length + ' bytes');      });            file.on('end', function() {        console.log('File [' + fieldname + '] Finished');      });*/    });    busboy.on('field', function(fieldname, val, fieldnameTruncated, valTruncated, encoding, mimetype) {      console.log('Field [' + fieldname + ']: value: ' + inspect(val));    });    busboy.on('finish', function() {      console.log('Done parsing form!');      console.timeEnd("upload");		      res.write("File Uploaded Successfully");      res.end();    });    req.pipe(busboy);  }}function lunchEMRCluster(req, res){	}exports.doUpload=doUpload;